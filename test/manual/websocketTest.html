<!DOCTYPE html>
<html lang="en">
  <head>
    <script defer>
        const HOST = 'ws://localhost:2345/game';
        const ws = new WebSocket(HOST);

        const requests = [
          {
            action: "create-game",
            name: "derek",
            x: 1,
            y: 0.5,
            attributes: {
              color: "red"
            }
          }
        ];
        
        let i = 0;
        
        const sendNextRequest() {
          if (i < requests.length) {
            ws.send(JSON.stringify(requests[i]));
            i++;
          }
        }

        ws.onmessage = (event) => {
          console.log(event);
          const output = document.getElementById('output');
          
          const li = document.createElement('li');
          li.innerText = event.data;

          output.appendChild(li);
          sendNextRequest();
        };

        ws.onopen = () => {
          sendNextRequest();
        }

    </script>
  </head>
  <body>
    <ul id="output"></ul>
  </body>
</html>